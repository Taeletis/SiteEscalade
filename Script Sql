--
-- PostgreSQL database dump
--

-- Dumped from database version 12.2
-- Dumped by pg_dump version 12.3

-- Started on 2021-03-23 20:02:42

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 203 (class 1259 OID 25046)
-- Name: commentaire; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.commentaire (
    id_commentaire bigint NOT NULL,
    date_modification timestamp without time zone,
    date_parution timestamp without time zone,
    description character varying(255),
    id_grimpeur bigint,
    id_site bigint
);


ALTER TABLE public.commentaire OWNER TO postgres;

--
-- TOC entry 205 (class 1259 OID 25053)
-- Name: grimpeur; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.grimpeur (
    id_grimpeur bigint NOT NULL,
    email character varying(255),
    mdp character varying(255),
    membre boolean NOT NULL,
    nom character varying(255),
    prenom character varying(255)
);


ALTER TABLE public.grimpeur OWNER TO postgres;

--
-- TOC entry 204 (class 1259 OID 25051)
-- Name: grimpeur_id_grimpeur_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.grimpeur ALTER COLUMN id_grimpeur ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.grimpeur_id_grimpeur_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 202 (class 1259 OID 17661)
-- Name: hibernate_sequence; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.hibernate_sequence
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.hibernate_sequence OWNER TO postgres;

--
-- TOC entry 206 (class 1259 OID 25061)
-- Name: longueur; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.longueur (
    id_longueur bigint NOT NULL,
    hauteur double precision NOT NULL,
    id_voie bigint,
    cotation character varying NOT NULL
);


ALTER TABLE public.longueur OWNER TO postgres;

--
-- TOC entry 207 (class 1259 OID 25066)
-- Name: reservation; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.reservation (
    id_reservation bigint NOT NULL,
    id_grimpeur bigint,
    id_statut bigint,
    id_topo bigint
);


ALTER TABLE public.reservation OWNER TO postgres;

--
-- TOC entry 209 (class 1259 OID 25073)
-- Name: secteur; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.secteur (
    id_secteur bigint NOT NULL,
    description character varying(255),
    lien_carte character varying(255),
    nom character varying(255),
    id_createur bigint,
    id_modificateur bigint,
    id_site bigint
);


ALTER TABLE public.secteur OWNER TO postgres;

--
-- TOC entry 208 (class 1259 OID 25071)
-- Name: secteur_id_secteur_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.secteur ALTER COLUMN id_secteur ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.secteur_id_secteur_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 210 (class 1259 OID 25081)
-- Name: site; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.site (
    id_site bigint NOT NULL,
    lien_image character varying(255),
    lieu character varying(255),
    mention boolean NOT NULL,
    nom character varying(255),
    id_topo bigint,
    id_grimpeur bigint,
    id_modificateur bigint
);


ALTER TABLE public.site OWNER TO postgres;

--
-- TOC entry 211 (class 1259 OID 25089)
-- Name: statut_type; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.statut_type (
    id_statut bigint NOT NULL,
    statut character varying(255)
);


ALTER TABLE public.statut_type OWNER TO postgres;

--
-- TOC entry 213 (class 1259 OID 25096)
-- Name: topo; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.topo (
    id_topo bigint NOT NULL,
    date_parution timestamp without time zone,
    disponible boolean NOT NULL,
    lieu character varying(255),
    nom character varying(255),
    id_site bigint,
    id_propietaire bigint
);


ALTER TABLE public.topo OWNER TO postgres;

--
-- TOC entry 212 (class 1259 OID 25094)
-- Name: topo_id_topo_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.topo ALTER COLUMN id_topo ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.topo_id_topo_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 214 (class 1259 OID 25104)
-- Name: voie; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.voie (
    id_voie bigint NOT NULL,
    annotation character varying(255),
    nom character varying(255),
    id_secteur bigint
);


ALTER TABLE public.voie OWNER TO postgres;

--
-- TOC entry 2732 (class 2606 OID 25050)
-- Name: commentaire commentaire_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.commentaire
    ADD CONSTRAINT commentaire_pkey PRIMARY KEY (id_commentaire);


--
-- TOC entry 2734 (class 2606 OID 25060)
-- Name: grimpeur grimpeur_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.grimpeur
    ADD CONSTRAINT grimpeur_pkey PRIMARY KEY (id_grimpeur);


--
-- TOC entry 2736 (class 2606 OID 25065)
-- Name: longueur longueur_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.longueur
    ADD CONSTRAINT longueur_pkey PRIMARY KEY (id_longueur);


--
-- TOC entry 2738 (class 2606 OID 25070)
-- Name: reservation reservation_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservation
    ADD CONSTRAINT reservation_pkey PRIMARY KEY (id_reservation);


--
-- TOC entry 2740 (class 2606 OID 25080)
-- Name: secteur secteur_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.secteur
    ADD CONSTRAINT secteur_pkey PRIMARY KEY (id_secteur);


--
-- TOC entry 2742 (class 2606 OID 25088)
-- Name: site site_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.site
    ADD CONSTRAINT site_pkey PRIMARY KEY (id_site);


--
-- TOC entry 2744 (class 2606 OID 25093)
-- Name: statut_type statut_type_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.statut_type
    ADD CONSTRAINT statut_type_pkey PRIMARY KEY (id_statut);


--
-- TOC entry 2746 (class 2606 OID 25103)
-- Name: topo topo_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.topo
    ADD CONSTRAINT topo_pkey PRIMARY KEY (id_topo);


--
-- TOC entry 2748 (class 2606 OID 25111)
-- Name: voie voie_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.voie
    ADD CONSTRAINT voie_pkey PRIMARY KEY (id_voie);


--
-- TOC entry 2755 (class 2606 OID 25142)
-- Name: secteur fk3qjakghgbghrlpd4druo48dfy; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.secteur
    ADD CONSTRAINT fk3qjakghgbghrlpd4druo48dfy FOREIGN KEY (id_createur) REFERENCES public.grimpeur(id_grimpeur);


--
-- TOC entry 2758 (class 2606 OID 25157)
-- Name: site fk4li8cvvf6l948qgyyijae88jw; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.site
    ADD CONSTRAINT fk4li8cvvf6l948qgyyijae88jw FOREIGN KEY (id_topo) REFERENCES public.topo(id_topo);


--
-- TOC entry 2757 (class 2606 OID 25152)
-- Name: secteur fk7ayk0wx98i7qd6d1xstgrexdh; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.secteur
    ADD CONSTRAINT fk7ayk0wx98i7qd6d1xstgrexdh FOREIGN KEY (id_site) REFERENCES public.site(id_site);


--
-- TOC entry 2753 (class 2606 OID 25132)
-- Name: reservation fk8dvv18jsfi7xan9j6ciumq5ui; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservation
    ADD CONSTRAINT fk8dvv18jsfi7xan9j6ciumq5ui FOREIGN KEY (id_statut) REFERENCES public.statut_type(id_statut);


--
-- TOC entry 2763 (class 2606 OID 25167)
-- Name: voie fkbo23xms8n7a30fovqfoh50aw4; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.voie
    ADD CONSTRAINT fkbo23xms8n7a30fovqfoh50aw4 FOREIGN KEY (id_secteur) REFERENCES public.secteur(id_secteur);


--
-- TOC entry 2749 (class 2606 OID 25112)
-- Name: commentaire fkf3p37o7arpvrmpymvcijuy4ic; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.commentaire
    ADD CONSTRAINT fkf3p37o7arpvrmpymvcijuy4ic FOREIGN KEY (id_grimpeur) REFERENCES public.grimpeur(id_grimpeur);


--
-- TOC entry 2762 (class 2606 OID 25196)
-- Name: topo fkfhnwcgyq0ya81e0vcwkcfnvax; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.topo
    ADD CONSTRAINT fkfhnwcgyq0ya81e0vcwkcfnvax FOREIGN KEY (id_propietaire) REFERENCES public.grimpeur(id_grimpeur);


--
-- TOC entry 2759 (class 2606 OID 25173)
-- Name: site fkj3ujei6k1jc6e40jeca6fob8c; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.site
    ADD CONSTRAINT fkj3ujei6k1jc6e40jeca6fob8c FOREIGN KEY (id_grimpeur) REFERENCES public.grimpeur(id_grimpeur);


--
-- TOC entry 2750 (class 2606 OID 25117)
-- Name: commentaire fkkgndecm5i0gjb9q0vr7c7qpir; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.commentaire
    ADD CONSTRAINT fkkgndecm5i0gjb9q0vr7c7qpir FOREIGN KEY (id_site) REFERENCES public.site(id_site);


--
-- TOC entry 2756 (class 2606 OID 25147)
-- Name: secteur fklqse0npey8wk250ooo8ds10s6; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.secteur
    ADD CONSTRAINT fklqse0npey8wk250ooo8ds10s6 FOREIGN KEY (id_modificateur) REFERENCES public.grimpeur(id_grimpeur);


--
-- TOC entry 2760 (class 2606 OID 25183)
-- Name: site fkmia3uhuno35gfxgq398bq4aal; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.site
    ADD CONSTRAINT fkmia3uhuno35gfxgq398bq4aal FOREIGN KEY (id_modificateur) REFERENCES public.grimpeur(id_grimpeur);


--
-- TOC entry 2761 (class 2606 OID 25191)
-- Name: topo fkq0u3kvcohifg7l9xe37aivo4i; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.topo
    ADD CONSTRAINT fkq0u3kvcohifg7l9xe37aivo4i FOREIGN KEY (id_site) REFERENCES public.site(id_site);


--
-- TOC entry 2752 (class 2606 OID 25127)
-- Name: reservation fkqcufd060p9cf6q9e41j4keu2r; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservation
    ADD CONSTRAINT fkqcufd060p9cf6q9e41j4keu2r FOREIGN KEY (id_grimpeur) REFERENCES public.grimpeur(id_grimpeur);


--
-- TOC entry 2754 (class 2606 OID 25137)
-- Name: reservation fkrxx2d19vx5ndessah3r5wit0c; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.reservation
    ADD CONSTRAINT fkrxx2d19vx5ndessah3r5wit0c FOREIGN KEY (id_topo) REFERENCES public.topo(id_topo);


--
-- TOC entry 2751 (class 2606 OID 25122)
-- Name: longueur fksntp125c2624k8psbmjo0daru; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.longueur
    ADD CONSTRAINT fksntp125c2624k8psbmjo0daru FOREIGN KEY (id_voie) REFERENCES public.voie(id_voie);


-- Completed on 2021-03-23 20:02:42

--
-- PostgreSQL database dump complete
--

